<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Inform 7 - 15.15. Varying which table to look at</title>
</head>
<body>
<div style="line-height: 18px;">

<!-- SEARCH TITLE "Farewell" -->
<!-- SEARCH SECTION "Ex 270" -->
<!-- SEARCH SORT "Ex 015-015-270" -->
<font><table><tr width="100%"><td width=80 valign="top"><a href=doc254.html border=0><img border=0 src=images/Back.png border=0></a><a href=index.html border=0><img border=0 src=images/Home.png border=0></a><a href=doc256.html border=0><img border=0 src=images/Forward.png border=0></a></td><td valign="top"><b>15.15. Varying which table to look at</b></td></tr></table><p>
<p>
<p>So far, we have always used fixed table names when referring to tables: for instance in source like &quot;sort the Table of Recent Monarchs in accession order&quot;, we refer to the &quot;Table of Recent Monarchs&quot;, a definite and explicitly named table.
<p>
<p>With a little care, however, we are allowed to have variables which themselves hold the names of tables. This opens up the possibility of more elaborate ways of storing and interconnecting information in table form, but is probably best avoided until it becomes necessary.
<p>
<p>For example, suppose we have two different tables with the same basic structure:
<p>
<blockquote><font color="#000080">Table 1 - Nifty Opening Plays in US Scrabble
<br><table border="0" valign="top" cellpadding="0" cellspacing="0"><tr><td valign="top"><font color="#000080">word</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">score</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font color="#000080">&quot;muzjiks&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">128</font>&nbsp;&nbsp;&nbsp;</td>
</tr></table>
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Table 2 - Nifty Opening Plays in UK Scrabble
<br><table border="0" valign="top" cellpadding="0" cellspacing="0"><tr><td valign="top"><font color="#000080">word</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">score</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font color="#000080">&quot;quartzy&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">126</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font color="#000080">&quot;squeezy&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">126</font>&nbsp;&nbsp;&nbsp;</td>
</tr></table>
</font></blockquote><p>
<p>
<p>We could then record which one of these tables to use in a variable:
<p>
<blockquote><font color="#000080">The lexicon is a table name that varies. The lexicon is Table 1.
</font></blockquote><p>
<p>
<p>Note that for this purpose, the kind of value is a special kind called &quot;table name&quot;, not &quot;table&quot;. (The word &quot;table&quot; already has too many meanings and we must be careful to avoid ambiguities here.) We could make use of this as follows, for instance:
<p>
<blockquote><font color="#000080">To flip tables:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You exchange dictionaries, lexically crossing the Atlantic. &quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the lexicon is Table 1, now the lexicon is Table 2;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise now the lexicon is Table 1;
<br>&nbsp;&nbsp;&nbsp;&nbsp;choose a random row in the lexicon;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;Did you know that according to [the lexicon], [word entry] scores [score entry]?&quot;
</font></blockquote><p>
<p>
<p>which produces text such as
<p>
<blockquote><font color="#000080">You exchange dictionaries, lexically crossing the Atlantic. Did you know that according to Table 1 - Nifty Opening Plays in US Scrabble, muzjiks scores 128?
</font></blockquote><p>
<p>
<p><hr><p>
<!-- EXAMPLE START -->
<a name="e91"><a href=doc255.html#e91 STYLE="text-decoration: none">**<b><b>Example</b> 270:  Farewell</b></a><br>People who respond to conversational gambits, summarize what they said before if asked again, and provide recap of conversation that is past.<p>
<table border=0 bgcolor="#f0f0f0" width=100%><tr><td><font>
<p>
<p>We begin with the idea that each person comes with his own table of things to say:
<p>
<blockquote><font color="#000080">&quot;Farewell&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">A person has a table name called conversation.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of asking someone about something:
<br>&nbsp;&nbsp;&nbsp;&nbsp;let the source be the conversation of the noun;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if topic understood is a topic listed in source:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if there is a turn stamp entry:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[The noun] has already told you that [summary entry].&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;otherwise:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now turn stamp entry is the turn count;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[reply entry][paragraph break]&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;otherwise:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[The noun] stares at you blankly.&quot;
</font></blockquote><p>
<p>
<p>For the sake of simplicity, we'll conflate asking and telling here, though it would certainly be possible to have a more complex implementation if we want the characters to be told things as well.
<p>
<blockquote><font color="#000080">Instead of telling someone about something:
<br>&nbsp;&nbsp;&nbsp;&nbsp;try asking the noun about it.
</font></blockquote><p>
<p>
<p>Now we might want to add a recap command to review conversation that has already occurred.
<p>
<blockquote><font color="#000080">Definition: a person is other if it is not the player.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;recap&quot; or &quot;recall&quot; or &quot;review&quot; as recalling conversations.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Recalling conversations is an action applying to nothing.
</font></blockquote><p>
<p>
<p>Since we've been recording the turn count of each conversation bit, we can even present these in order by sorting the tables first.
<p>
<blockquote><font color="#000080">Carry out recalling conversations:
<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat with speaker running through other people:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let source be the conversation of the speaker;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sort source in turn stamp order;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;[The speaker] has so far told you: [line break]&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let index be 0;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;repeat through source:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if there is a turn stamp entry:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let index be 1;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;  [summary entry][line break]&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if index is 0, say &quot;  absolutely nothing[line break]&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say conditional paragraph break.
</font></blockquote><p>
<p>
<p>Now it remains only to create a couple of characters and provide them both with something to say:
<p>
<blockquote><font color="#000080"> The Farewell Bend Cafe is a room. &quot;Beautiful Farewell Bend, Idaho -- or is it Oregon? An almost-abandoned truckstop, in any case, on one of those interminable American east-west highways.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Tina is a woman in the Farewell Bend Cafe. The conversation of Tina is the Table of Tina's Chatter. &quot;Tina the waitress is slowly pouring coffee from the pot with a black neck into the pot with an orange neck.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">George is a man in the Farewell Bend Cafe. The conversation of George is the Table of George's Chatter. &quot;There is also a large man at table five. The tattoo on his arm says George. For the moment we will assume that it is his own name and not someone else's.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Table of Tina's Chatter
<br><table border="0" valign="top" cellpadding="0" cellspacing="0"><tr><td valign="top"><font color="#000080">topic</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">reply</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">summary</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">turn stamp</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font color="#000080">&quot;aasvogel&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">&quot;'Oh, it's a vulture.'&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">&quot;that an aasvogel is a vulture&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">a number</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font color="#000080">&quot;acaudate&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">&quot;She shrugs, mid-pour. 'Means something doesn't have a tail.'&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">&quot;that acaudate means 'tailless'&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">--</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font color="#000080">&quot;absorptiometer&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">&quot;'It's a thing that measures the solubility of gases in a liquid,' she explains gently, as to a child.&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">&quot;that an absorptiometer measures solubility of gasses in a liquid&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">--</font>&nbsp;&nbsp;&nbsp;</td>
</tr></table>
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Table of George's Chatter
<br><table border="0" valign="top" cellpadding="0" cellspacing="0"><tr><td valign="top"><font color="#000080">topic</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">reply</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">summary</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">turn stamp</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font color="#000080">&quot;baccaceous&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">&quot;'Something that has or bears berries,' says George, without looking up.&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">&quot;that baccaceous means berry-bearing or berry-like&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">a number</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font color="#000080">&quot;bagheera&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">&quot;'Oh, that'd be a velvet-like textile.'&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">&quot;that bagheera is a velvet-like textile&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">--</font>&nbsp;&nbsp;&nbsp;</td>
</tr><tr><td valign="top"><font color="#000080">&quot;balistarius&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">&quot;'That's a crossbow-man,' George replies instantly.&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">&quot;that a balistarius is a crossbow-man&quot;</font>&nbsp;&nbsp;&nbsp;</td><td valign="top"><font color="#000080">--</font>&nbsp;&nbsp;&nbsp;</td>
</tr></table>
</font></blockquote><p>
<p>
<p>A word of warning: this system does assume that every person in the game has a conversation table defined. If that were not the case, we would have to be a bit more careful.
<p>
<p>As always, we can override specific words, too:
<p>
<blockquote><font color="#000080">Instead of asking Tina about &quot;advertisement&quot; for the first time:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;Tina looks embarrassed. 'Of course! I almost forgot.' She hands you a brochure.&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;move the brochure to the player.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The encyclopedia sales brochure is a thing. The description is &quot;A glossy flyer indicating that you can receive a free Volume A-Aalto of the New Idahoan Encyclopedia Set if you send back the business reply card, and then have the option of purchasing the remaining volumes at a very very reasonable price.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test me with &quot;recap / ask tina about aasvogel / recap / ask george about baccaceous / ask tina about absorptiometer / recap / ask tina about advertisement / read brochure&quot;.
</font></blockquote><p>
</td></tr></table><p>
<!-- EXAMPLE END -->
<p><hr><p><a href=doc254.html STYLE="text-decoration: none">Previous</a> / <a href=doc256.html STYLE="text-decoration: none">Next</a> / <a href=index.html STYLE="text-decoration: none">Contents</a><p></font></div>
</body>
</html>
