<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Inform 7 - 20.10. Lengthening or shortening a list</title>
</head>
<body>
<div style="line-height: 18px;">

<!-- SEARCH TITLE "Leopard-skin" -->
<!-- SEARCH SECTION "Ex 419" -->
<!-- SEARCH SORT "Ex 020-010-419" -->
<font><table><tr width="100%"><td width=80 valign="top"><a href=doc357.html border=0><img border=0 src=images/Back.png border=0></a><a href=index.html border=0><img border=0 src=images/Home.png border=0></a><a href=doc359.html border=0><img border=0 src=images/Forward.png border=0></a></td><td valign="top"><b>20.10. Lengthening or shortening a list</b></td></tr></table><p>
<p>
<p>We can explicitly change the length of a list like so:
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>change </b>(list of values)<b> to have </b>(number)<b> entries</b>/entry<b></b><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_changelength -->

<p>This phrase alters the given list so that it now has exactly the number of entries given. Example:
<p>
<blockquote><font color="#000080">change L to have 21 entries;
</font></blockquote><p>
<p>
<p>If L previously had more than 21 entries, they are thrown away (and lost forever); if L previously had fewer, then new entries are created, using the default value for whatever kind of value L holds. So extending a list of numbers will pad it out with 0s, but extending a list of texts will pad it out with the empty text &quot;&quot;, and so on.
<p>
<!-- end definition -->
</table>
<p>
<p>We can also write the slightly different phrases:
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>truncate </b>(list of values)<b> to </b>(number)<b> entries</b>/entry<b></b><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_truncate -->

<p>This phrase alters the given list so that it now has no more than the number of entries given. Example:
<p>
<blockquote><font color="#000080">truncate L to 8 entries;
</font></blockquote><p>
<p>
<p>shortens L to length 8 if it is currently longer than that, trimming entries from the end, but would (for instance) leave a list of length 3 unchanged. Note that
<p>
<blockquote><font color="#000080">truncate L to 0 entries;
</font></blockquote><p>
<p>
<p>empties it to { }, the list with nothing in.
<p>
<!-- end definition -->
</table>
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>truncate </b>(list of values)<b> to the first </b>(number)<b> entries</b>/entry<b></b><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_truncatefirst -->

<p>This phrase alters the given list so that it now consists only of the initial part of the list with the given length. Example:
<p>
<blockquote><font color="#000080">truncate L to the first 4 entries;
</font></blockquote><p>
<p>
<p>turns {1, 3, 5, 7, 9, 11} to {1, 3, 5, 7}.
<p>
<!-- end definition -->
</table>
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>truncate </b>(list of values)<b> to the last </b>(number)<b> entries</b>/entry<b></b><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_truncatelast -->

<p>This phrase alters the given list so that it now consists only of the final part of the list with the given length. Example:
<p>
<blockquote><font color="#000080">truncate L to the last 4 entries;
</font></blockquote><p>
<p>
<p>turns {1, 3, 5, 7, 9, 11} to {5, 7, 9, 11}.
<p>
<!-- end definition -->
</table>
<p>
<p>But we don't have to truncate: we can also -
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>extend </b>(list of values)<b> to </b>(number)<b> entries</b>/entry<b></b><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_extend -->

<p>This phrase pads out the list with default values as needed so that it now has at least the given length. (If the list is already at least that length, nothing is done.) Example:
<p>
<blockquote><font color="#000080">extend L to 80 entries;
</font></blockquote><p>
<p>
<p>lengthens L to length 80 if it is currently shorter than that.
<p>
<!-- end definition -->
</table>
<p>
<p>For example,
<p>
<blockquote><font color="#000080">To check sorting (N - a number):
<br>&nbsp;&nbsp;&nbsp;&nbsp;let L be a list of numbers;
<br>&nbsp;&nbsp;&nbsp;&nbsp;extend L to N entries;
<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat with X running from 1 to N:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;now entry X of L is X;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;L unrandomised is [L].&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;sort L in random order;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;L randomised is [L].&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;sort L;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;L in ascending order is [L].&quot;
</font></blockquote><p>
<p>
<p>builds a list of N numbers (initially all 0), fills it with the numbers 1, 2, 3, ..., N, then randomly reorders them, then sorts them back again, recovering the original order. The text produced by &quot;check sorting 10&quot; depends partly on chance but might for instance be:
<p>
<blockquote><font color="#000080">L unrandomised is 1, 2, 3, 4, 5, 6, 7, 8, 9 and 10.
<br>L randomised is 6, 2, 9, 3, 10, 1, 7, 4, 8 and 5.
<br>L in ascending order is 1, 2, 3, 4, 5, 6, 7, 8, 9 and 10.
</font></blockquote><p>
<p>
<p>As with indexed text in the previous chapter, a project which needs really long lists should use the Glulx virtual machine - &quot;check sorting 10000&quot;, for instance, would break the default memory environment on the Z-machine, which is very tight, but works fine (if not very rapidly) on Glulx.
<p>
<p><hr><p>
<!-- EXAMPLE START -->
<a name="e221"><a href=doc358.html#e221 STYLE="text-decoration: none">*<b><b>Example</b> 419:  Leopard-skin</b></a><br>A maze that the player can escape if he performs an exact sequence of actions.<p>
<table border=0 bgcolor="#f0f0f0" width=100%><tr><td><font>
<p>
<p>Suppose (as in Infocom's Leather Goddesses of Phobos) that we have a maze that the player can escape only by performing the correct sequence of actions in the correct order. One way to do this would be to keep a list of the player's most recent actions, and see whether these match up with the combination we have established as the maze's solution.
<p>
<p>For instance:
<p>
<blockquote><font color="#000080"> &quot;Leopard-skin&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Fur-Lined Maze is a room. &quot;This seemingly endless sequence of rooms is decorated in a tasteful selection of exotic furs and gilded fixtures.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Clapping is an action applying to nothing. Understand &quot;clap&quot; as clapping.
<br>Kweepaing is an action applying to nothing. Understand &quot;kweepa&quot; as kweepaing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out clapping:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You clap.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out kweepaing:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You holler 'KWEEPA!' triumphantly.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The maze-sequence is a list of stored actions that varies.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">When play begins:
<br>&nbsp;&nbsp;&nbsp;&nbsp;add the action of jumping to the maze-sequence;
<br>&nbsp;&nbsp;&nbsp;&nbsp;add the action of clapping to the maze-sequence;
<br>&nbsp;&nbsp;&nbsp;&nbsp;add the action of kweepaing to the maze-sequence.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The attempted-sequence is a list of stored actions that varies.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Every turn when the player is in the Fur-Lined Maze:
<br>&nbsp;&nbsp;&nbsp;&nbsp;truncate the attempted-sequence to the last two entries;
<br>&nbsp;&nbsp;&nbsp;&nbsp;add the current action to the attempted-sequence;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the attempted-sequence is the maze-sequence:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;say &quot;That does it! You are instantly transported from the maze!&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end the story finally.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test me with &quot;hop / clap / clap / hop / kweepa / hop / clap / kweepa&quot;.
</font></blockquote><p>
</td></tr></table><p>
<!-- EXAMPLE END -->
<a name="e135"><a href=ex135.html#e135 STYLE="text-decoration: none">**<b>Example 420:  The Facts Were These</b></a><br>Creating a variant GIVE action that lets the player give multiple objects simultaneously with commands like GIVE ALL TO ATTENDANT or GIVE THREE DOLLARS TO ATTENDANT or GIVE PIE AND HAT TO ATTENDANT. The attendant accepts the gifts only if their total combined value matches some minimum amount.<p>
<p><hr><p><a href=doc357.html STYLE="text-decoration: none">Previous</a> / <a href=doc359.html STYLE="text-decoration: none">Next</a> / <a href=index.html STYLE="text-decoration: none">Contents</a><p></font></div>
</body>
</html>
