<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Inform 7 - 12.20. Stored actions</title>
</head>
<body>
<div style="line-height: 18px;">

<!-- SEARCH TITLE "Stored actions" -->
<!-- SEARCH SECTION "12.20" -->
<!-- SEARCH SORT "012-020-000" -->
<font><table><tr width="100%"><td width=80 valign="top"><a href=doc205.html border=0><img border=0 src=images/Back.png border=0></a><a href=index.html border=0><img border=0 src=images/Home.png border=0></a><a href=doc207.html border=0><img border=0 src=images/Forward.png border=0></a></td><td valign="top"><b>12.20. Stored actions</b></td></tr></table><p>
<p>
<p>As we have seen, to describe an action fully takes a complicated little bundle of information - we need to know what is to be done, who will do it, and what it will be done to. There are times when we would like to remember an action and look back on it later (perhaps many turns later, after many other actions have taken effect) - but this is not easy to do with only the techniques we have seen so far. There are quite a few cases to get right, and it would be easy to not store quite enough of the details.
<p>
<p>Fortunately, Inform provides a kind of value called &quot;stored action&quot; which can do all of this automatically. As with most other kinds of value, stored actions can be held in variables, &quot;let&quot; values, properties or table columns. For example:
<p>
<blockquote><font color="#000080">The best idea yet is a stored action that varies.
</font></blockquote><p>
<p>
<p>creates a variable called &quot;the best idea yet&quot; which holds a stored action.
<p>
<p>This will normally be created holding the default value - the player waiting. We really only have two ways to make more interesting stored actions:
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>action of </b>(an action)<b></b> ... <i>stored action</i><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_actionof -->

<p>This phrase produces a literally typed action as a value. Example:
<p>
<blockquote><font color="#000080">now the best idea yet is the action of pushing the button;
</font></blockquote><p>
<p>
<p>The action must be specific in every respect, so &quot;action of taking something&quot; or &quot;action of doing something&quot; will not work - &quot;taking something&quot; is really a general description of many possible actions, not an action in its own right.
<p>
<!-- end definition -->
</table>
<p>
<p>Note the words &quot;action of...&quot;, which convert any sufficiently exact description of an action into its stored action form.
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>current action</b> ... <i>stored action</i><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_currentaction -->

<p>This phrase produces the action currently being processed as a value - it literally stores the action, and remembers, if necessary, the exact wording of the player's command at the time it was stored - so that even actions arising from commands like LOOK UP X100 IN THE CODE BOOK can be stored faithfully. Examples:
<p>
<blockquote><font color="#000080">let the present whim be the current action;
<br>say &quot;How you would like to be [current action].&quot;;
</font></blockquote><p>
<p>
<p>This only makes sense if an action is currently going on, so it shouldn't be used in &quot;every turn&quot; rules, for instance.
<p>
<!-- end definition -->
</table>
<p>
<p>So much for making stored actions: now for making use of them. The first obvious idea is to store up an action for several turns and then have it take effect later. That's easily done: just as we can &quot;try&quot; any action written out explicitly, so we can also try a stored one. The phrase to do this has exactly the same wording either way, since it does the same thing either way.
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>try </b>(stored action)<b></b><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_trystored -->

<p>This phrase makes the stored action take effect now. Example:
<p>
<blockquote><font color="#000080">try the present whim;
</font></blockquote><p>
<p>
<p>If the present whim contains, say, the action of taking the beach ball, then the effect is exactly the same as &quot;try taking the beach ball&quot;. The stored action isn't destroyed or otherwise used up in the process, so it can be tried again another time, as often as we like.
<p>
<!-- end definition -->
</table>
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>silently try </b>(stored action)<b></b><br><i>or:</i> <b>try silently </b>(stored action)<b></b><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_trystoredsilently -->

<p>This phrase makes the stored action take effect now, under the &quot;silent&quot; convention which means that routine messages aren't printed. Example:
<p>
<blockquote><font color="#000080">silently try the present whim;
</font></blockquote><p>
<p>
<p>If the present whim contains, say, the action of taking the beach ball, and the action succeeds, nothing is printed, but if something goes awry then a message is printed to say why. Either way, the effect is exactly the same as &quot;try silently taking the beach ball&quot;.
<p>
<!-- end definition -->
</table>
<p>
<p>But stored actions can still be useful even if we never intend to try them. For one thing, we can say them, and this produces a fairly natural description of what the action is:
<p>
<blockquote><font color="#000080">Before doing something in the presence of the bearded psychiatrist: say &quot;'Zo, the subject vishes to engage in [the current action]. Zis is very interesting.'&quot;
</font></blockquote><p>
<p>
<p>will produce text such as:
<p>
<blockquote><font color="#000080">&quot;So, the subject vishes to engage in rubbing the fireman's pole. Zis is very interesting.&quot;
</font></blockquote><p>
<p>
<p>One of Inform's most convenient features is its ability to test if the action being processed matches vague or complicated descriptions of whole classes of actions. Now, it would not make sense to write
<p>
<blockquote><font color="#000080">if the best idea yet is the action of taking something, ...
</font></blockquote><p>
<p>
<p>because &quot;action of ...&quot; has to make an exact action, which clearly this is not: so Inform will produce a problem message if we try. But we do not need to, because Inform also allows us to compare a stored action against any description of an action, however vague:
<p>
<blockquote><font color="#000080">if the best idea yet is taking something, ...
<br>if the best idea yet is doing something to the lever, ...
</font></blockquote><p>
<p>
<p>Just occasionally, this can lead to ambiguities. For instance,
<p>
<blockquote><font color="#000080">if the current action is wearing something, ...
</font></blockquote><p>
<p>
<p>fails because Inform thinks &quot;wearing&quot; is meant in the sense of the current action having clothes on, so it produces a problem message. To avoid this, simply write:
<p>
<blockquote><font color="#000080">if the current action is trying wearing something, ...
</font></blockquote><p>
<p>
<p>which can't be misunderstood.
<p>
<p>When dealing with stored actions, we sometimes want to know what they are dealing with. We can extract this information using the following phrases:
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>action name part of </b>(stored action)<b></b> ... <i>action name</i><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_actionpart -->

<p>This phrase produces the action name part of an action. Example: suppose the current actor is Algy, who is throwing the brick at Biggles. Then
<p>
<blockquote><font color="#000080">action name part of the current action = throwing it at
</font></blockquote><p>
<p>
<!-- end definition -->
</table>
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>noun part of </b>(stored action)<b></b> ... <i>object</i><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_nounpart -->

<p>This phrase produces the (first) noun of an action. Example: suppose the current actor is Algy, who is throwing the brick at Biggles. Then
<p>
<blockquote><font color="#000080">noun part of the current action = the brick
</font></blockquote><p>
<p>
<p>If the noun is something other than an object, this produces just &quot;nothing&quot;, the non-object.
<p>
<!-- end definition -->
</table>
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>second noun part of </b>(stored action)<b></b> ... <i>object</i><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_secondpart -->

<p>This phrase produces the second noun of an action. Example: suppose the current actor is Algy, who is throwing the brick at Biggles. Then
<p>
<blockquote><font color="#000080">second noun part of the current action = Biggles
</font></blockquote><p>
<p>
<p>If the second noun is something other than an object (for instance for the command SET DIAL TO 3417 it would be the number 3417), this produces just &quot;nothing&quot;, the non-object.
<p>
<!-- end definition -->
</table>
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>actor part of </b>(stored action)<b></b> ... <i>object</i><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_actorpart -->

<p>This phrase produces the person who would be carrying out the action if it were being tried. Example: suppose the current actor is Algy, who is throwing the brick at Biggles. Then
<p>
<blockquote><font color="#000080">actor part of the current action = Algy
</font></blockquote><p>
<p>
<!-- end definition -->
</table>
<p>
<p>The following phrase is a convenient shorthand form:
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><i>if</i> <b></b>(stored action)<b> involves </b>(object)<b></b><i>:</i><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_involves -->

<p>This condition is true if the object appears as any of the actor, the noun or the second noun in the action. Example:
<p>
<blockquote><font color="#000080">if the current action involves Algy
</font></blockquote><p>
<p>
<p>would be true for &quot;give revolver to Algy&quot;, &quot;Algy trying flying the Sopwith Camel&quot;, &quot;examine Algy&quot; and so on, but false for &quot;ask Raymond about secret airfield&quot;.
<p>
<!-- end definition -->
</table>
<p>
<p><hr><p>
<a name="e43"><a href=ex43.html#e43 STYLE="text-decoration: none">*<b>Example 219:  Bosch</b></a><br>Creating a list of actions that will earn the player points, and using this both to change the score and to give FULL SCORE reports.<p>
<a name="e59"><a href=ex59.html#e59 STYLE="text-decoration: none">*<b>Example 220:  Cactus Will Outlive Us All</b></a><br>For every character besides the player, there is an action that will cause that character to wither right up and die.<p>
<a name="e1"><a href=ex1.html#e1 STYLE="text-decoration: none">**<b>Example 221:  Actor's Studio</b></a><br>A video camera that records actions performed in its presence, and plays them back with time-stamps.<p>
<a name="e11"><a href=ex11.html#e11 STYLE="text-decoration: none">**<b>Example 222:  Anteaters</b></a><br>The player carries a gizmo that is able to record actions performed by the player, then force him to repeat them when the gizmo is dropped. This includes storing actions that apply to topics, as in "look up anteater colonies in the guide".<p>
<p><hr><p><a href=doc205.html STYLE="text-decoration: none">Previous</a> / <a href=doc207.html STYLE="text-decoration: none">Next</a> / <a href=index.html STYLE="text-decoration: none">Contents</a><p></font></div>
</body>
</html>
