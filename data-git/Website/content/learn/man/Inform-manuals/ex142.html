<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Inform 7 - 22.13. Writing, reading and appending text to files</title>
</head>
<body>
<div style="line-height: 18px;">

<!-- SEARCH TITLE "The Fifth Body" -->
<!-- SEARCH SECTION "Ex 433" -->
<!-- SEARCH SORT "Ex 022-013-433" -->
<font><table><tr width="100%"><td width=80 valign="top"><a href=doc381.html border=0><img border=0 src=images/Back.png border=0></a><a href=index.html border=0><img border=0 src=images/Home.png border=0></a><a href=doc383.html border=0><img border=0 src=images/Forward.png border=0></a></td><td valign="top"><b>22.13. Writing, reading and appending text to files</b></td></tr></table><p>
<p>
<p>Text can also be saved to a file, and again all file-handling is automatic:
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>write </b>(text)<b> to </b>(external file)<b></b><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_writetext -->

<p>This phrase makes the given text become the entire contents of the named file. Note that files must have been declared, and must be referred to by their Inform names, not by textual filenames. Example:
<p>
<blockquote><font color="#000080">write &quot;Jackdaws love my big sphinx of quartz.&quot; to the file of Abecedary Wisdom;
</font></blockquote><p>
<p>
<!-- end definition -->
</table>
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '><b>append </b>(text)<b> to </b>(external file)<b></b><table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_appendtext -->

<p>This phrase adds the given text to the end of the current contents of the named file (creating it if it does not exist on disc). Note that files must have been declared, and must be referred to by their Inform names, not by textual filenames. Example:
<p>
<blockquote><font color="#000080">append &quot;Jinxed wizards pluck ivy from the big quilt.&quot; to the file of Abecedary Wisdom;
</font></blockquote><p>
<p>
<!-- end definition -->
</table>
<p>
<p>The quoted text can, of course, contain substitutions, so can be long and complex if need be.
<p>
<p>Text from a file is printed back with the text substitution:
<p>
<p><p style='padding: 0.75em; border: 1px dashed #2f6fab; color: black; background-color: #e9e9e9; line-height: 1.5em; '>say &quot;[<b>text of external file</b>]&quot;<table CELLPADDING=0 CELLSPACING=0 width='100%'><tr><td halign='left' valign='center' CELLPADDING=0 CELLSPACING=0><font>
<!-- definition of ph_saytext -->

<p>This text expands to the contents of the named file. Note that files must have been declared, and must be referred to by their Inform names, not by textual filenames. Example:
<p>
<blockquote><font color="#000080">&quot;[text of the File of Abecedary Wisdom]&quot;
</font></blockquote><p>
<p>
<!-- end definition -->
</table>
<p>
<p>To copy one file to another, for instance,
<p>
<blockquote><font color="#000080">write &quot;[text of the file of Abecedary Wisdom]&quot; to the file of Secondary Wisdom;
</font></blockquote><p>
<p>
<p><hr><p>
<a name="e157"><a href=ex157.html#e157 STYLE="text-decoration: none">*<b>Example 432:  The Fourth Body</b></a><br>Notebooks in which the player can record assorted notes throughout play.<p>
<!-- EXAMPLE START -->
<a name="e142"><a href=doc382.html#e142 STYLE="text-decoration: none">**<b><b>Example</b> 433:  The Fifth Body</b></a><br>An expansion on the notebook, allowing the player somewhat more room in which to type his recorded remark.<p>
<table border=0 bgcolor="#f0f0f0" width=100%><tr><td><font>
<p>
<p>The implementation here is much like that of the previous example, except that we allow the player to write his notebook input as a separate command, leading to an exchange such as
<p>
<blockquote><font color="#000080">>write in my notebook
<br>You open your notebook and prepare to write in it.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">>>Am beginning to think that HT and BGG are in this together.
<br>You finish writing and fold your notebook away.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">>read my notebook
<br>You read:
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Wednesday morning
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Am beginning to think that HT and BGG are in this together.
</font></blockquote><p>
<p>
<p>The opening is much as before:
<p>
<blockquote><font color="#000080">&quot;The Fifth Body&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">A jotter is a kind of thing. A jotter has an external file called the text file. A jotter can be fresh or used. A jotter is usually fresh. A jotter has a text called the heading.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The currently erased jotter is an object that varies.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">To erase (pad - a jotter):
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the currently erased jotter is the pad;
<br>&nbsp;&nbsp;&nbsp;&nbsp;write &quot;[heading of the currently erased jotter][paragraph break]&quot; to the text file of the pad;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the pad is fresh.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">To write in (pad - a jotter):
<br>&nbsp;&nbsp;&nbsp;&nbsp;append &quot;[the time of day]: [player's command][line break]&quot; to the text file of the pad;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the pad is used.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">To read (pad - a jotter):
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You read: [paragraph break][text of the text file of the pad]&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">When play begins:
<br>&nbsp;&nbsp;&nbsp;&nbsp;repeat with pad running through jotters:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;erase the pad.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of examining a used jotter (called the pad):
<br>&nbsp;&nbsp;&nbsp;&nbsp;read the pad.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Instead of examining a fresh jotter (called the pad):
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;There is nothing of note in [the pad].&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Target jotter is an object that varies. The target jotter is usually nothing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;write in [something preferably held]&quot; as writing in. Writing in is an action applying to one thing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check writing in:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the noun is not a jotter, say &quot;It would be better to write in a notebook.&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out writing in:
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the command prompt is &quot;>>&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the target jotter is the noun.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Report writing in:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You open [the noun] and prepare to write in it.&quot;
</font></blockquote><p>
<p>
<p>Now what happens is that the player, having typed WRITE IN NOTEBOOK, will be faced with a &quot;>>&quot; prompt instead of the usual &quot;>&quot;: a sign that the input mode has changed.
<p>
<p>The next code is to react to reading a command. Whatever the player types at the >> prompt when the target jotter is set will now be recorded in the notebook, though with a character limit of about 60-100 characters depending on how much upper-case and punctuation he uses. (There are ways to lift the character length restriction as well, but they would take us into deeper waters.)
<p>
<blockquote><font color="#000080">After reading a command when target jotter is a jotter:
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the command prompt is &quot;>&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;write in target jotter;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now target jotter is used;
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You finish writing and fold your notebook away.&quot;;
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the target jotter is nothing;
<br>&nbsp;&nbsp;&nbsp;&nbsp;reject the player's command.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Understand &quot;erase [something preferably held]&quot; as erasing. Erasing is an action applying to one carried thing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check erasing:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the noun is not a jotter, say &quot;It's hard to see how.&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out erasing:
<br>&nbsp;&nbsp;&nbsp;&nbsp;erase the noun.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Report erasing:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You scrub out all the entries in [the noun].&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The player carries a jotter called your notebook. The file of Player's Observations is called &quot;notebook&quot;. The text file of your notebook is the file of Player's Observations. The heading of your notebook is &quot;Sunday Morning&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The Vestry is a room. &quot;[Havers] hangs back by the door: the forensics expert is not finished with a preliminary examination of the body. From here you can't see much, except that the expert has peeled back and laid to one side a liturgical vestment that someone at the church used to cover the corpse until the police came. What was once a cream silk with festive Easter embroidery is now stained with blood-colored handprints.&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Detective Havers is a woman in the Vestry. The description is &quot;She looks glumly back. There's still a purple-ish bruise on her cheekbone from the disaster Thursday afternoon.&quot; Havers is scenery.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Havers is carrying a jotter called Barbara's notebook. The file of Barbara's Observations is called &quot;barbara&quot;. The text file of Barbara's notebook is the file of Barbara's Observations. The heading of Barbara's notebook is &quot;Sun. AM&quot;.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The time of day is 9:11 AM.
</font></blockquote><p>
<p>
</td></tr></table><p>
<!-- EXAMPLE END -->
<p><hr><p><a href=doc381.html STYLE="text-decoration: none">Previous</a> / <a href=doc383.html STYLE="text-decoration: none">Next</a> / <a href=index.html STYLE="text-decoration: none">Contents</a><p></font></div>
</body>
</html>
