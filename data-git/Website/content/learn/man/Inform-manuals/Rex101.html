<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Inform 7 - 3.5. Doors, Staircases, and Bridges</title>
</head>
<body>
<div style="line-height: 18px;">

<!-- SEARCH TITLE "Neighborhood Watch" -->
<!-- SEARCH SECTION "Ex 23" -->
<!-- SEARCH SORT "Ex 003-005-023" -->
<font><table><tr width="100%"><td width=80 valign="top"><a href=doc11.html border=0><img border=0 src=images/Back.png border=0></a><a href=Rindex.html border=0><img border=0 src=images/Home.png border=0></a><a href=doc13.html border=0><img border=0 src=images/Forward.png border=0></a></td><td valign="top"><b>3.5. Doors, Staircases, and Bridges</b></td></tr></table><p>
<p>
<p>Inform's &quot;door&quot; kind provides for a tangible thing which comes between one room and another. A door can be open or closed, and openable or not: it can be locked or unlocked, and lockable or not. Here we create a conventional door, a natural gap in the rocks, and a (fixed in place) wooden ladder:
<p>
<blockquote><font color="#000080">The fire door is an open door. The fire door is east of the Projection Booth and west of the Fire Escape.
<br>The narrow crevice is an open unopenable door. The crevice is east of the Col du Prafleuri and west of Rocky Knoll Above Arolla.
<br>The wooden ladder is an open unopenable door. The ladder is above the Stableyard and below the Hay Loft.
</font></blockquote><p>
<p>
<p>Most doors are visible from both sides: they are single objects but present in two rooms at once, which raises a number of complications. Inform normally uses the same description looking from each way, which is not very interesting: <b>When?</b> and <b>Whence?</b> demonstrate neat ways to describe the two sides differently, and <b>Whither?</b> adds the option for the player to refer to doors as &quot;the west door&quot; and &quot;the east door&quot; automatically.
<p>
<p><b>Neighbourhood Watch</b> goes further by making a door behave differently on each side: from the &quot;outside&quot; you need a key, but &quot;inside&quot; it opens on a latch. Finally, <b>Garibaldi 1</b> shows how to access information about the two sides of a door.
<p>
<p><b>Higher Calling</b> demonstrates doors which automatically open as needed: though using the Inform extension Locksmith by Emily Short is probably easier and better. <b>Elsie</b>, conversely, demonstrates a door that closes one turn after the player has opened it.
<p>
<p>Certain complications apply when characters other than the player have to see and interact with doors that exist in other rooms. <b>Wainwright Acts</b> demonstrates the syntax needed to handle this technically quirky situation.
<p>
<p><b>Something Narsty</b> and <b>Hayseed</b> provide a &quot;staircase&quot; kind useful for vertically arranged, always-open doors like staircases and (fixed in place) ladders.
<p>
<p><b>One Short Plank</b> implements a precarious plank bridge across a chasm as an open unopenable door.
<p>
<a href=Rdoc13.html STYLE="text-decoration: none"><font color=\"#000000\"><img border="0" style="height: 15px; width: 13px;" alt="*" src='images/diamond.png'>&nbsp;<i>See </i><b>Windows</b></font></a><i> for climbing through a window from one room to another</i><p><p>
<a href=Rdoc85.html STYLE="text-decoration: none"><font color=\"#000000\"><img border="0" style="height: 15px; width: 13px;" alt="*" src='images/diamond.png'>&nbsp;<i>See </i><b>Ropes</b></font></a><i> for portable connections between rooms, much of the development of which could be adapted to handle portable ladders. &quot;Doors&quot; are never allowed to move</i><p><p>
<a href=Rdoc89.html STYLE="text-decoration: none"><font color=\"#000000\"><img border="0" style="height: 15px; width: 13px;" alt="*" src='images/diamond.png'>&nbsp;<i>See </i><b>Magic (Breaking the Laws of Physics)</b></font></a><i> for a hat that lets the player walk through closed doors</i><p><p>
<a href=Rdoc31.html STYLE="text-decoration: none"><font color=\"#000000\"><img border="0" style="height: 15px; width: 13px;" alt="*" src='images/diamond.png'>&nbsp;<i>See </i><b>Modifying Existing Commands</b></font></a><i> for ways to allow the player to unlock with a key he isn't currently holding</i><p><p>
<p><hr><p>
<a name="e107"><a href=Rex107.html#e107 STYLE="text-decoration: none">*<b>Example 63:  When?</b></a><br>A door whose description says "...leads east" in one place and "...leads west" in the other.<p>
<a name="e18"><a href=Rex18.html#e18 STYLE="text-decoration: none">***<b>Example 65:  Whence?</b></a><br>A kind of door that always automatically describes the direction it opens and what lies on the far side (if that other room has been visited).<p>
<a name="e427"><a href=Rex427.html#e427 STYLE="text-decoration: none">*<b>Example 309:  Whither?</b></a><br>A door whose description says where it leads; and which automatically understands references such as "the west door" and "the east door" depending on which direction it leads from the location.<p>
<a name="e108"><a href=Rex108.html#e108 STYLE="text-decoration: none">*<b>Example 128:  Higher Calling</b></a><br>All doors in the game automatically attempt to open if the player approaches them when they are closed.<p>
<a name="e119"><a href=Rex119.html#e119 STYLE="text-decoration: none">**<b>Example 150:  Elsie</b></a><br>A door that closes automatically one turn after the player opens it.<p>
<!-- EXAMPLE START -->
<a name="e101"><a href=Rdoc12.html#e101 STYLE="text-decoration: none">**<b><b>Example</b> 23:  Neighborhood Watch</b></a><br>A locked door that can be locked or unlocked without a key from one side, but not from the other.<p>
<table border=0 bgcolor="#ffffc0" width=100%><tr><td><font>
<p>
<p>Suppose we want a locked door that can be opened with a key, but is also openable by hand without a key from one side only. We start by defining an ordinary lockable door and the key that controls it:
<p>
<blockquote><font color="#000080">&quot;Neighborhood Watch&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The shabby door is a door. It is outside from the Studio Apartment and inside from the Rickety Stairwell. The shabby door is locked.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">The brass key is carried by the player. It unlocks the shabby door.
</font></blockquote><p>
<p>
<p>The next part is going to require that we modify the normal operation of the &quot;lock&quot; command. &quot;Lock&quot; ordinarily requires that the player supply two objects: a thing he wants to unlock, and the key he wants to use on it. The full command is LOCK DOOR WITH THE KEY, and Inform will not accept simply LOCK DOOR as locking.
<p>
<p>Therefore, we're going to need to create our own new variant on the lock verb (and the unlock verb, while we're at it). The full procedure for this is laid out in the chapters on Action and Understanding, but here is an example:
<p>
<blockquote><font color="#000080">Understand &quot;lock [something]&quot; as locking keylessly. Locking keylessly is an action applying to one thing.
</font></blockquote><p>
<p>
<p>Here we've created a new action -- locking something without a key -- and we've told Inform to understand LOCK DOOR as this action, rather than an incomplete command to LOCK DOOR WITH SOMETHING.
<p>
<p>Now we add some instructions so that the game will not let us use this keyless unlocking command unless we're in the right place or are properly equipped:
<p>
<blockquote><font color="#000080">Check locking keylessly:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the noun is not a door, say &quot;[The noun] is not something you can lock.&quot; instead;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the noun is locked, say &quot;[The noun] is already locked.&quot; instead;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the player carries the brass key and the player is in the Stairwell, try locking the noun with the brass key instead;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the player is in the Stairwell, say &quot;You can't lock the door from this side without the key.&quot; instead.
</font></blockquote><p>
<p>
<p>This check rule is performed before the keyless locking action succeeds. The first thing we do is try to use the key if the player is outside and has the key: this way, LOCK DOOR will turn automatically into LOCK DOOR WITH THE KEY, under circumstances where that is both possible and necessary.
<p>
<p>The second thing is to check whether the player is outside but keyless, and, if so stop the action from being performed successfully. Here we print a failure message followed by the word &quot;instead&quot;, which tells Inform that we've substituted some other outcome for the usual performance of the action.
<p>
<p>Now we're reasonably sure that the player is only locking keylessly in the case that he is inside the Studio. (We might have to do a more thorough check for this if there were more than two rooms, but as it is, the player can only be in the Stairwell or in the Studio, so if we have ruled out the Stairwell, we are safe.) So now we want to add what happens when locking-without-a-key command succeeds:
<p>
<blockquote><font color="#000080">Carry out locking keylessly:
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the noun is locked.
</font></blockquote><p>
<p>
<p>That's it. We've just told Inform to make the door be locked. &quot;Now...&quot; syntax will be explained more thoroughly in the chapter on change. But we still haven't described to the player what just happened, so let's provide a description of that, too:
<p>
<blockquote><font color="#000080">Report locking keylessly:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You flip over the deadbolt to lock [the noun].&quot;
</font></blockquote><p>
<p>
<p>And now we have to do a similar set of things for unlocking:
<p>
<blockquote><font color="#000080">Understand &quot;unlock [something]&quot; as unlocking keylessly. Unlocking keylessly is an action applying to one thing.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Check unlocking keylessly:
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the noun is not a door, say &quot;[The noun] is not something you can lock.&quot; instead;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the noun is unlocked, say &quot;[The noun] is already unlocked.&quot; instead;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the player carries the brass key and the player is in the Stairwell, try unlocking the noun with the brass key instead;
<br>&nbsp;&nbsp;&nbsp;&nbsp;if the player is in the Stairwell, say &quot;You can't unlock the door from this side without the key.&quot; instead.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Carry out unlocking keylessly:
<br>&nbsp;&nbsp;&nbsp;&nbsp;now the noun is unlocked.
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Report unlocking keylessly:
<br>&nbsp;&nbsp;&nbsp;&nbsp;say &quot;You flip over the deadbolt to unlock [the noun].&quot;
</font></blockquote><p>
<p>
<blockquote><font color="#000080">Test me with &quot;unlock door / drop key / open door / out / close door / lock door / open door / in / get key / out / close door / lock door / unlock door&quot;.
</font></blockquote><p>
<p>
<p>Some (but not all) of this work is done for you if you like by the Locksmith extension. If you prefer, you can include that extension, then follow the documentation in order to implement the remainder of the scenario. Locksmith takes care of implementing the additional locking and unlocking actions, and provides some other conveniences.
</td></tr></table><p>
<!-- EXAMPLE END -->
<a name="e161"><a href=Rex161.html#e161 STYLE="text-decoration: none">***<b>Example 21: Garibaldi 1</b></a><br>Providing a security readout device by which the player can check on the status of all doors in the game.<p>
<a name="e409"><a href=Rex409.html#e409 STYLE="text-decoration: none">*<b>Example 236:  Wainwright Acts</b></a><br>A technical note about checking the location of door objects when characters other than the player are interacting with them.<p>
<a name="e352"><a href=Rex352.html#e352 STYLE="text-decoration: none">*<b>Example 43:  Something Narsty</b></a><br>A staircase always open and never openable.<p>
<a name="e353"><a href=Rex353.html#e353 STYLE="text-decoration: none">*<b>Example 89:  Hayseed</b></a><br>A refinement of our staircase kind which can be climbed.<p>
<a name="e292"><a href=Rex292.html#e292 STYLE="text-decoration: none">**<b>Example 106:  One Short Plank</b></a><br>A plank bridge which breaks if the player is carrying something when he goes across it. Pushing anything over the bridge is forbidden outright.<p>
<p><hr><p><a href=Rdoc11.html STYLE="text-decoration: none">Previous</a> / <a href=Rdoc13.html STYLE="text-decoration: none">Next</a> / <a href=Rindex.html STYLE="text-decoration: none">Contents</a><p></font></div>
</body>
</html>
